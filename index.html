<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="./assets/images/favicon-32x32.png"
    />
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,400;0,700;0,800;1,400;1,700;1,800&display=swap"
      rel="stylesheet"
    />
    <script>
      var labels = document.getElementsByClassName("label");
      var inputs = document.getElementsByClassName("input");
      var warnings = document.getElementsByClassName("message");
      var d = new Date();
      function errorMessage(e, message) {
        for (i = 0; i < 3; i++) {
          inputs[i].style.outline = "1px solid var(--light-red)";
          labels[i].style.color = "var(--light-red)";
          warnings[i].style.display = "block";
        }
        warnings[e].innerHTML = message;
      }
      function getDaysInMonth(year, month) {
        return new Date(year, month, 0).getDate();
      }

      function calc() {
        var days = document.getElementById("days");
        var months = document.getElementById("months");
        var years = document.getElementById("years");
        if (days.value == 0) {
          errorMessage(0, "This field is required");
        } else {
          warnings[0].style.display = "none";
        }
        if (months.value == 0) {
          errorMessage(1, "This field is required");
        } else {
          warnings[1].style.display = "none";
        }
        if (years.value == 0) {
          errorMessage(2, "This field is required");
        } else {
          warnings[2].style.display = "none";
        }
        if (years.value > d.getFullYear()) {
          errorMessage(2, "Must be in the past");
        }else {
          warnings[2].style.display = "none";
        }
        if (months.value > 12) {
          errorMessage(1, "Must be a valid month");
        }else {
          warnings[1].style.display = "none";
        }
        if (days.value > getDaysInMonth(years.value, months.value)) {
          errorMessage(0, "Must be a valid day");
        }else {
          warnings[0].style.display = "none";
        }
        if (
      days.value != 0 &&
      months.value != 0 &&
      years.value != 0 &&
      years.value <= d.getFullYear() &&
      months.value <= 12 &&
      days.value <= getDaysInMonth(years.value, months.value)
    ){ for (i = 0; i < 3; i++) {
            inputs[i].style.outline = "1px solid var(--light-gray)";
            labels[i].style.color = "var(--smokey-gray)";
            warnings[i].style.display = "none";
          }
          var currentDate = d.getTime();
        var birthDate = new Date(
          years.value,
          months.value - 1,
          days.value
        ).getTime();
        var timeDiff = currentDate - birthDate;

        // Calculate the difference in years, accounting for leap years
        var secondsInYear = 365.25 * 24 * 60 * 60; // Average number of seconds in a year (including leap years)
        var years = Math.floor(timeDiff / (1000 * secondsInYear));
        timeDiff -= years * (1000 * secondsInYear);

        // Calculate the difference in months
        var monthsDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 30));
        timeDiff -= monthsDiff * (1000 * 60 * 60 * 24 * 30);

        // Calculate the difference in days
        var daysDiff = Math.floor(timeDiff / (1000 * 60 * 60 * 24));

        // Display the results
        var answer = document.getElementsByClassName("answer");
        answer[0].innerHTML = years;
        answer[1].innerHTML = monthsDiff;
        answer[2].innerHTML = daysDiff;}
        }
        
      
    </script>
  </head>
  <body>
    <div class="main">
      <section class="inputs">
        <span class="area"
          ><label class="label">Day</label>
          <input class="input" id="days" type="text" placeholder="DD" />
        </span>
        <span class="area"
          ><label class="label"> Month</label>
          <input class="input" id="months" type="text" placeholder="MM" />
        </span>
        <span class="area"
          ><label class="label">Year</label>
          <input class="input" id="years" type="text" placeholder="YYYY" />
        </span>
        <span class="area"><div class="message"></div></span>
        <span class="area"><div class="message"></div></span>
        <span class="area"><div class="message"></div></span>
      </section>
      <section class="divider">
        <hr />
        <button onclick="calc()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="30"
            height="30"
            viewBox="0 0 46 44"
          >
            <g fill="none" stroke="#FFF" stroke-width="2">
              <path
                d="M1 22.019C8.333 21.686 23 25.616 23 44M23 44V0M45 22.019C37.667 21.686 23 25.616 23 44"
              />
            </g>
          </svg>
        </button>
      </section>
      <section class="result">
        <div class="dashes">
          <span class="answer"> -- </span>
          <span class="answer">--</span>
          <span class="answer">--</span>
        </div>
        <div class="words">
          <span>years</span>
          <span>months</span>
          <span>days</span>
        </div>
      </section>
    </div>
  </body>
</html>
